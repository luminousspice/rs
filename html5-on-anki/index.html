<!DOCTYPE html>
<html class="no-js" lang="ja" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
<meta name="description" content='HTML5 Video の機能を使って、Anki に埋め込んだ動画のインターフェイスを変更する方法について説明します。さらに Mac と iPhone でデータを同期する場合の注意点についても扱います。'>
<meta name="keywords" content="Anki, HTML5, iOS, iPhone, 開発">

<meta property="og:type" content="article" />
<meta property="og:description" content='HTML5 Video の機能を使って、Anki に埋め込んだ動画のインターフェイスを変更する方法について説明します。さらに Mac と iPhone でデータを同期する場合の注意点についても扱います。'/>
<meta property="og:title" content="Anki カードへの HTML5 メディアの埋め込み" />
<meta property="og:site_name" content="the Right Stuff" />
<meta property="og:url" content="http://rs.luminousspice.com/html5-on-anki/">
<meta property="og:locale" content="ja">
<meta property="og:image" content="http://rs.luminousspice.com/apple-touch-icon.png" />

<meta property="article:published_time" content="2015-12-31T23:00:39Z"/>
<meta property="article:modified_time" content="2016-05-23T13:40:59Z"/>



<meta property="article:tag" content="Anki"><meta property="article:tag" content="HTML5"><meta property="article:tag" content="iOS"><meta property="article:tag" content="iPhone"><meta property="article:tag" content="開発">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@luminousspice">
<meta name="twitter:title" content="Anki カードへの HTML5 メディアの埋め込み">
<meta name="twitter:creator" content="@luminousspice">
<meta name="twitter:description" content='HTML5 Video の機能を使って、Anki に埋め込んだ動画のインターフェイスを変更する方法について説明します。さらに Mac と iPhone でデータを同期する場合の注意点についても扱います。'>
<meta name="twitter:image:src" content="http://rs.luminousspice.com/apple-touch-icon.png">
<meta name="twitter:domain" content="luminousspice.com">

  <base href="http://rs.luminousspice.com">
  <title>Anki カードへの HTML5 メディアの埋め込み | the right stuff</title>

  <link rel="stylesheet" href="http://rs.luminousspice.com/css/rs.css">

  <link rel="apple-touch-icon" href="http://rs.luminousspice.com/apple-touch-icon.png">
  <link rel="shortcut icon" href="http://rs.luminousspice.com/favicon.ico" type="image/x-icon">
  
  <link rel="canonical" href="http://rs.luminousspice.com/html5-on-anki/">
  <link href="http://rs.luminousspice.com/index.xml" rel="alternate" type="application/rss+xml" title="the Right Stuff" />
  <link href="http://rs.luminousspice.com/index.xml" rel="feed" type="application/rss+xml" title="the Right Stuff" />
</head>


  <body>

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    このコンテンツは @luminousspice が非同期的に更新しています。経時的な順序に意味はありません。
  </div>

  <nav class="sidebar-nav">
    
    <a class="sidebar-nav-item " href="http://rs.luminousspice.com/table-of-contents/">総目次</a>
    <a class="sidebar-nav-item " href="http://rs.luminousspice.com/index-how-to-anki/">Anki 索引</a>
    <a class="sidebar-nav-item " href="http://rs.luminousspice.com/post/">アーカイブ</a>
    <a class="sidebar-nav-item " href="http://rs.luminousspice.com/search/">全文検索</a>
    
    <a class="sidebar-nav-item" href="https://github.com/luminousspice">GitHub project</a>
  </nav>

  <div class="sidebar-item">
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="http://rs.luminousspice.com/" title="Home">the Right Stuff</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="post">
  <h1 class="post-title">Anki カードへの HTML5 メディアの埋め込み</h1>
  <span class="post-date"><time datetime="2015-12-31T23:00:39Z"></time>2016-05-23 更新</span>
  <nav class="toc">
    <div id="toc"></div>
  </nav>
  <div class="post-content">
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>HTML5 Video の機能を使って、Anki に埋め込んだ動画のインターフェイスを変更する方法について説明します。さらに Mac と iPhone でデータを同期する場合の注意点についても扱います。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_はじめに">はじめに</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Anki に動画を埋め込むと別ウィンドウで再生します。この動作が些細なことですが違和感を覚えていました。Anki の動画再生に使っている <a href="http://rs.luminousspice.com/mplayer-shortcut-for-anki-video/">MPlayer のショートカット</a>を使えばかなり動作を細かく制御できることは分かったのですが、別ウィンドウが開くことへわだかまりは消えませんでした。そこでこの問題を解決するするために辿り着いた、HTML5 Video 要素を使ってカードに埋め込んだ動画を再生する方法を紹介します。なお、HTML5 によるメディアの埋め込みは Anki のサポート対象外です。</p>
</div>
<div class="paragraph">
<p>こちらもサポート対象外ながら Iframe を使うという方法もあります。この方法を以前利用していたのですが、Google API のサポートの変更にともなって今年の 4 月頃から YouTube の動画を Anki 上に埋め込み表示できなくなりました。さて、何か代わりの方法はないだろうかというのが、HTML5 の利用を考え始めた切っ掛けです。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_注意事項">注意事項</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この記事は、Anki のサポート対象外の機能について説明しています。</p>
</div>
<div class="paragraph">
<p>たとえば、Anki サポートフォーラムの記事 <a href="https://anki.tenderapp.com/discussions/ankidesktop/12516-can-i-embed-youtube-videos">Can I embed Youtube videos?</a> 、<a href="https://anki.tenderapp.com/discussions/ankidesktop/4745-embedding-external-websites-with-iframe-or-object-html-tags">Embedding external websites with iframe or object html tags</a>によれば、Anki は HTML5 や Flash の埋め込みコンテンツやIFrame によるリモート表示をサポートしていません。</p>
</div>
<div class="paragraph">
<p>このことを理解した上で、動作している自分の環境 (OS X および iOS)の経験に基づいてこの投稿を作成しています。お使いになっている環境によっては、この記事の方法では動作しないかもしれません。
この記事を理解するには、HTML5 メディア埋め込みに関するの知識が必要です。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_html5_の記述">HTML5 の記述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>一番シンプルな書き方は、Anki のメディアフォルダに <code>myvideo.mp4</code> という動画を表示するなら、次のような HTML の記述をノートに書き込みます。<code>controls</code> 属性を付けているのは、再生位置や音量などの再生コントロールを表示するためです。<code>src</code> 属性は、http サーバー上にあるコンテンツを指定しても動作します。</p>
</div>
<div class="listingblock">
<div class="title">動画の埋め込み</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;video src="myvideo.mp4" controls&gt;&lt;/video&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_コードの入力">コードの入力</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTML を入力する際の注意点は、HTML エディタを開いて入力することです。ノートエディタで入力したいフィールドにフォーカスをあわせたら、Command + Shift + X を押すと HTML エディタが開きます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://rs.luminousspice.com/images/html5-anki-htmleditor.png" alt="HTML エディタで HTML5 Video 要素を入力する">
</div>
<div class="title">図 1. HTML エディタで HTML5 Video 要素を入力する</div>
</div>
<div class="paragraph">
<p>完成品は次の通りです。動画下部に再生コントロールが現れます。左から、再生ボタン、再生時間、再生位置表示、全画面表示、音量が調節できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://rs.luminousspice.com/images/html5-anki-card.png" alt="HTML5 Video で動画をカードに埋め込む">
</div>
<div class="title">図 2. HTML5 Video で動画をカードに埋め込む</div>
</div>
<div class="paragraph">
<p>なお、再生速度を調節するスライダーの追加方法を<a href="http://rs.luminousspice.com/html5controller-on-anki/">Anki カードに埋め込んだ HTML5 Video の速度調整</a>で説明しています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_音声の埋め込み">音声の埋め込み</h2>
<div class="sectionbody">
<div class="paragraph">
<p>なお、HTML5 Audio 機能を使って音声も埋め込むことができます。
この場合は次のように HTML を記述します。この場合は、動画と同様のコントロールだけを表示します。</p>
</div>
<div class="listingblock">
<div class="title">音声の埋め込み</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;audio src="myvideo.mp4" controls&gt;&lt;/audio&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_iphone_との連携">iPhone との連携</h2>
<div class="sectionbody">
<div class="paragraph">
<p>なお、HTML5 Video および Audio ともに iPhone (iOS) 上で動作します。同じデータを Mac、iPhone 間で同期して使うことができます。双方の環境で利用可能なフォーマットは、動画は mp4、音声は mp3 でした。</p>
</div>
<div class="paragraph">
<p>また、iPhone から HTML5 のコードを直接入力しても動作します。</p>
</div>
<div class="paragraph">
<p>動画の場合は、動画の真ん中のボタンをタップすると <code>[sound:]</code> タグで埋め込んだときと同様のコントロールが立ち上がって、動画を再生します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://rs.luminousspice.com/images/html5-anki-iphone-video.png" alt="HTML5 Video を iPhone 上で表示">
</div>
<div class="title">図 3. HTML5 Video を iPhone 上で表示</div>
</div>
<div class="paragraph">
<p>音声の場合は、再生コントロールを表示します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://rs.luminousspice.com/images/html5-anki-iphone-audio.png" alt="HTML5 Audio を iPhone 上で表示">
</div>
<div class="title">図 4. HTML5 Audio を iPhone 上で表示</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ファイルを書き出す際の注意点">ファイルを書き出す際の注意点</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTML5 の Video、Audio 要素を使ったカードを Anki 単語帳パッケージ (APKG) として書き出す場合、特定の単語帳を指定すると <code>[sound:]</code> タグを使っていないメディアファイルは同梱しません。</p>
</div>
<div class="paragraph">
<p>コレクション全体を指定した場合は、同梱します。</p>
</div>
<div class="paragraph">
<p>また、AnkiWeb と同期する場合には、このようなメディアファイルは同期の対象になります。</p>
</div>
<div class="paragraph">
<p>ただし、AnkiWeb と同期後、共有単語帳として公開した場合、ダウンロードファイルには <code>[sound:]</code> タグを使っていないメディアファイルは同梱しません。</p>
</div>
<div class="paragraph">
<p>一番単純な回避策は、通常の <code>[sound:]</code> タグを使ったダミーのカードを一枚作ることではないかと思います。</p>
</div>
<div class="sect2">
<h3 id="_訂正">訂正</h3>
<div class="paragraph">
<p>初出では、テンプレートに書き込んだ HTML5 要素から参照しているメディアファイルが、iTunes ファイル共有や AnkiWeb の同期の対象外になると書きましたが、正しくありませんでしたので訂正します。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_おわりに">おわりに</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTML5 の力を借りれば、ちょっと HTML のコードを書くだけで、Anki のカードの使い勝手を変更できることが分かりました。</p>
</div>
<div class="paragraph">
<p>Anki を使った学習は、毎日継続する作業なので、ちょっとしたユーザーインターフェイスの使い勝手であっても、モチベーションに大きな影響を与えます。たとえ、正式にサポートされていない機能であっても、自分が使っている機器で動作が確認できれば、そのインターフェイスを帰ることもできる柔軟性を Anki は持っています。
自分の知識を活用して、毎日少しずつ Anki の学習環境を改善していくことも、Anki を使う楽しみではないかと思います。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_更新履歴">更新履歴</h2>
<div class="sectionbody">
<div class="paragraph">
<p>2015/12/31 初出<br>
2016/04/25 ファイルを書き出す際の注意点を訂正</p>
</div>
</div>
</div>

  </div>
  <aside class="reference">
  
  
<hr />
<div class="sticky-itslink"><a href="https://itunes.apple.com/jp/app/ankimobile-flashcards/id373493387?mt=8&uo=4&at=11lGoS" rel="nofollow" target="_blank"><img src="http://is1.mzstatic.com/image/thumb/Purple69/v4/bd/43/a4/bd43a467-9f6d-d11a-5750-22b0bd88f7b9/source/60x60bb.jpg" style="border-style:none;float:left;margin:5px;" alt="AnkiMobile Flashcards" title="AnkiMobile Flashcards" /></a><div class="sticky-itslinktext"><a href="https://itunes.apple.com/jp/app/ankimobile-flashcards/id373493387?mt=8&uo=4&at=11lGoS" rel="nofollow" target="_blank">AnkiMobile Flashcards</a><br />Ankitects Pty Ltd<br />価格： 3,000円 <a href="https://itunes.apple.com/jp/app/ankimobile-flashcards/id373493387?mt=8&uo=4&at=11lGoS" rel="nofollow" target="_blank"><img src="http://linkmaker.itunes.apple.com/htmlResources/assets//images/web/linkmaker/badge_appstore-sm.png" alt ="iTunesで見る" style="border-style:none;" class="sticky-itslinkbadge" /></a><br /><span style="font-size:xx-small;">posted with <a href="http://sticky.linclip.com/linkmaker/" target="_blank">sticky</a> on 2016.3.24</span></div><br style="clear:left;" /></div> 

  </aside>
</div>

      <footer>
        <div class="footer">
          &copy; 2017 luminousspice.com.
        </div>
      </footer>
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

<script>
var addtoc = function() {

  var threshold = 5;
  var toc = document.getElementById('toc');      
  var widget = document.querySelector('.toc');   
  var pre1 = document.querySelector('.sect1');   
  var pre2 = document.querySelector('#preamble');
  var headings = document.querySelectorAll('.post-content h2');
  if (!toc || !widget) {
    return;
  }
  if (headings.length < threshold) {
    return;
  }

  list = [];
  list.push('<div class="toc-title">この記事の内容</div><ol>');

    for (var i=0; i < headings.length; i++) {
      var h = headings[i];
      var d = document.createElement('a');
      var aname = 'i-' + i;
      d.name = aname;
      h.parentNode.insertBefore(d, h);
      var s = '<li><a href="http:\/\/rs.luminousspice.com\/html5-on-anki\/#' + aname + '">' + h.innerHTML + '</a></li>';
      list.push(s);
    }

  list.push('</ol>');
  toc.innerHTML = list.join("");
 
  if (pre2){
    pre2.appendChild(widget);
  } else {
    pre1.parentNode.insertBefore(widget, pre1); 
   }
}

addtoc();
</script>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-29141274-4', 'auto');
ga('send', 'pageview');
</script>



  </body>
</html>
