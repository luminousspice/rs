+++
date = "2016-04-14T03:40:00+00:00"
title = "Anki 復習予測の読み方"
type = "note"
categories = ["Art of Anki"]
tags = ["Anki","AnkiMobile","統計","予測","シュミレーション"]
anki = ["Anki","AnkiMobile","統計","予測","シュミレーション"]
excerpt = "Anki の統計情報には復習予測についてのグラフを表示しています。このデータを正しく利用するために、マニュアルとは違った視点からの説明します。"
+++
= Anki 復習予測の読み方
:author: luminousspice
:lang: ja
:encoding: UTF-8
:keywords:
:description: Anki の統計情報には復習予測についてのグラフを表示しています。このデータを正しく利用するために、マニュアルとは違った視点からの説明します。
:figure-caption: 図

////
:toc: macro
:toc-placement:
:toclevels: 1
http://rs.luminousspice.com/anki-stats-due-forcast/
////

{description}

//toc::[]


== 予測グラフから読み取れること

Anki の統計情報の始めの方に予測という項目がある。この項目についてサポートサイトに繰り返し投稿が寄せられている。
link:http://ankisrs.net/docs/manual.html#the-graphs[Anki 正式マニュアル]とは視点からの違った説明をしたい。

....
この棒グラフは、全ての復習カードの復習期日をプロットしたものだ。
....

一度学習したカードなら、保留や延期にしていても復習時期が設定されている。
このグラフは、日付データを日付順に並び替えたものだ。

.統計情報 予測
image::/images/stats-forcast.png["統計情報 予測"]

=== 棒グラフの意味

たとえば、今日の日付を 3/31 として上のグラフを説明してみよう。
現時点で 4/10 には 19 枚の復習カードが復習時期に設定している。これは確定情報で、カードを削除しない限り減ることはない。

棒グラフは、その日の復習枚数の最小値を示している。

=== 線グラフの意味

実際に 4/10 に復習するカードはそればかりではない。今日 3/31 から前日の 4/9 にも 4/10 に復習するカードの中からも出ててくるはずだ。その間の復習カードの合計枚数が線グラフが示す値だ。3/31 から 4/9 までの棒グラフの数値の合計値である。
この値は、新規にカードを追加しなければ変化しない確定値だ。

....
線グラフは、その日の復習枚数の予想最大値だ。
....

たとえば、今日から前日の 4/9 まで何もしなかった時は、この最大値 320枚くらい復習することになる。しかし、この値を超えた 400 枚になることはありえない。

== このグラフの意味はなにか

このグラフは、棒グラフと線グラフを組み合わせてみることに意味があり、復習数の最小値と最大値の広がりを示してくれる。

....
予測項目が示してくれるのは、その日の復習枚数の予測最小値と、最大値。
....

実際の復習数は、棒グラフと線グラフの間におさまる。スペースの関係で二つのグラフのスケールは違っていますが。 

日にちが経って、4/10 に近づいていけば、グラフは左に移動する。10 日間のまだ不確定な情報が確定していくにつれて、4/10 の予測データの確度が上がっていく。

4/10 の予想最小値は上がり、最大値は下がっていくだろう。
そして前日の、4/9 に棒グラフと線グラフの値は一致する。

その値が、[明日が期日のカード] あるいは [Due tomorrow] で示す値だ。

.AnkiMobile Statistics
image::/images/am-stats-forcast.png["AnkiMobile Statistics"]

== このグラフにまつわる議論

この棒グラフの値が実際の値よりかなり小さいと、繰り返しサポートサイトに投稿がある。
おそらく、グラフは正常動作しているだろう。予測期間が長ければ、実測値との乖離が大きいのはなおさらだ。

グラフが示す最大値、最小値から外れた異常値を示したということであれば、アプリケーションの修正を検討すべき問題であるがその様な報告は、まだ見たことがない。

== 復習量シュミレーションについて

現状の統計情報の代わりにシュミレーションを取り付ける要求も、ずいぶん長い間寄せられ続けている。

また、Anki の予測シュミレーションプログラムを作った方がいる。このプログラムのアイデアは AnkiDroid アドオンとしてすでに取り入れられている。

Anki を長期的に使用した経験からシュミレーションについて気がつくことがあった。

シュミレーションは正解率が固定::
Anki で記憶するカードは、追加してから慣れるに従って正解率が向上していく。経験上では 60 -> 90 % の幅で変化している。教材の習熟について考慮されていない。

シュミレーションで使う正解率が高い::
シュミレーションで使う正解率の固定値はだいたい 80-90% だ。自分の過去の学習データから正解率を作成した場合でも、慣れた時点での単語帳のデータを使うため正解率は高く出る。最初から正解率 90% のカードならそもそも SRS を使うまでもないのではないか。

Anki を使い始めた方や、新しく追加した単語帳についてはシュミレーションの予測は期待できない。

復習量の蓄積のある単語帳については、このようなシュミレーション機能は有効だろう。Anki に慣れた人にためにこの機能はぜひとも Anki に取り入れるべきだろうか。

次のグラフを見てほしい。はじめに紹介した単語帳の復習実績の統計だ。既に復習は定常状態に入って大きな変動はない。

.統計情報 復習した回数
image::/images/stats-review-count.png["復習した回数"]

Anki になれると大量の復習データを抱えていても、新規のカードを追加し続けたとしても、一日の作業に大きな変化はなくなる。

Anki を使う時間も復習する枚数も変わらないのだ。

シュミレーションの機能には興味を持つが、自分の教材へ利用する必要性を感じない理由が分かった。

== まとめ

* 統計情報の予測グラフは、線グラフと棒グラフを組み合わせて見ることに意義がある
* グラフは予測する日の復習枚数の最小値と最大値の範囲を示してくれる
* 棒グラフは、その日の復習枚数の予測最小値を示す
* 線グラフは、その日の復習枚数の予測最大値を示す
* 予測日が近くなるにつれて、最大値と最小値が収斂していく


== 参考情報

* Anki ソースファイル https://github.com/dae/anki/blob/master/anki/stats.py[anki/stats.py]
* http://www.zhtoolkit.com/posts/2014/11/anki-myth-1-the-cake-is-a-lie/[Anki Myth 1: The Cake is a Lie]
