---
date: "2016-04-11T11:26:29+00:00"
title: "AnkiMobile ノート: 音声制御アップデート"
type: "note"
categories: ["AnkiMobile"]
tags: ["iOS","iPhone","音声","メディア","TTS","Web Speech API"]
anki: ["AnkiMobile","音声","メディア"]
excerpt: "Anki の iOS 版アプリ AnkiMobile は、2.0.18 から音声制御の方法が大きく変わりました。iPhone 本体のスイッチの設定で AnkiMobile の自動再生が無効になります。そこで、AnkiMobile 2.0.20 現在での音声再生の方法について整理しました。"
---
= AnkiMobile ノート: 音声制御アップデート
:author: luminousspice
:lang: ja
:encoding: UTF-8
:keywords:
:description: Anki の iOS 版アプリ AnkiMobile は、2.0.18 から音声制御の方法が大きく変わりました。iPhone 本体のスイッチの設定で AnkiMobile の自動再生が無効になります。そこで、AnkiMobile 2.0.20 現在での音声再生の方法について整理しました。
:figure-caption: 図

////
:toc: macro
:toc-placement:
:toclevels: 1
http://rs.luminousspice.com/ankimobile-sound-control/
////

{description}

//toc::[]

== AnkiMobile における音声制御

https://geo.itunes.apple.com/jp/app/ankimobile-flashcards/id373493387?mt=8&at=11lGoS[AnkiMobile Flashcards] では、カードから参照しているサウンドファイルは次の方法で再生を開始します。

* 自動再生 (単語帳別に操作の割り当てが可能)
* ユーザーによる画面操作 (コレクション全体で設定)

== 自動再生

カードに音声ファイルへの参照がある場合、カードを表示した時に自動再生します。

.自動再生の設定
. 学習画面右上の [Tools]
. [Study Options]
. [Automatically play audio] を有効にする。

.自動再生設定
image::/images/am-deckoption-audio.png["自動再生設定"]

== 再生ボタン

カードに音声ファイルへの参照がある場合、再生ボタン (Audio Button) をカード面に表示します。

.再生ボタン
image::/images/am-audio-button.png["再生ボタン"]

.再生ボタンの設定
. 単語帳一覧 (Deck List) 右上の歯車アイコンをタップ
. [Review]
. [Audio Button] を有効にする。

.環境設定画面
image::/images/am-preference-audio.png["環境設定画面"]

== マルチタッチスクリーンのジェスチャ

マルチタッチスクリーンのジェスチャ、スワイプやタップから再生操作を呼び出すことができます。

.左にスワイプを再生に割り当てる設定
. 単語帳一覧 (Deck List) 右上の歯車アイコンをタップ
. [Review] - [Swipes]
. [Swipe Left] をタップし [Replay Audio] を選択

.左スワイプに再生を設定
image::/images/am-swipe-replay.png["左スワイプに再生を設定"]

== マナーモードでの自動再生

AnkiMobile 2.0.18 から、iPhone 本体側面にある「着信／サイレントスイッチ」が有効になっている (マナーモード) と、AnkiMobile での音声の自動再生が無効になります。
ただし、ユーザーがボタンを押すなどして再生操作を行うことはできます。

また、link:https://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.html[Web Speech API] を使ったテキスト読み上げを自動再生にしている場合も無効になります。

サイレントスイッチを無視する設定は、環境設定画面 (Preference) から設定できます。
この機能は、同時にバックグラウンドで再生中のサウンドの音量を下げます。

.マナーモードでも自動再生する設定
. 単語帳一覧 (Deck List) 右上の歯車アイコンをタップ
. [Review]
. [Always Duck + Ignore Mute] を有効にする。

.環境設定画面
image::/images/am-preference-audio.png["環境設定画面"]

== まとめ

* AnkiMobile で音声を再生するには、自動再生を設定するか、ユーザーが画面操作して再生処理を呼び出す。
* 好きなマルチタッチスクリーンのジェスチャに再生操作を割り当てることができる。
* マナーモード中に自動再生は機能しないが、設定で変更することもできる。

////
AnkiMobile 2.0.20
Added an option to the preferences to permanently reduce the background audio (even for autoplay), and ignore the mute switch.

AnkiMobile 2.0.18
Audio handling simplified:
    When playing automatically, don't make the background music quieter, and don't play if the mute switch is on.
    When replaying audio via the (re)play button, the volume of existing music is dipped and the mute switch is ignored.
////