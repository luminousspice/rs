<!DOCTYPE html>
<html class="no-js" lang="ja" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
<meta name="description" content='ZenCodingサービスをautomatorと既存のPerl実装を利用して作ったよ。'>
<meta name="keywords" content="automator, mac, perl, services, zencoding">

<meta property="og:type" content="article" />
<meta property="og:description" content='ZenCodingサービスをautomatorと既存のPerl実装を利用して作ったよ。'/>
<meta property="og:title" content="Zencoding Automator Services" />
<meta property="og:site_name" content="the Right Stuff" />
<meta property="og:url" content="http://rs.luminousspice.com/zencoding-automator-services/">
<meta property="og:locale" content="ja">
<meta property="og:image" content="http://rs.luminousspice.comapple-touch-icon.png" />

<meta property="article:published_time" content="2012-08-06T20:49:29Z"/>
<meta property="article:modified_time" content="2012-08-06T20:49:29Z"/>



<meta property="article:tag" content="automator"><meta property="article:tag" content="mac"><meta property="article:tag" content="perl"><meta property="article:tag" content="services"><meta property="article:tag" content="zencoding">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@luminousspice">
<meta name="twitter:title" content="Zencoding Automator Services">
<meta name="twitter:creator" content="@luminousspice">
<meta name="twitter:description" content='ZenCodingサービスをautomatorと既存のPerl実装を利用して作ったよ。'>
<meta name="twitter:image:src" content="http://rs.luminousspice.comapple-touch-icon.png">
<meta name="twitter:domain" content="luminousspice.com">

  <base href="http://rs.luminousspice.com">
  <title>Zencoding Automator Services | The Right Stuff</title>

  <link rel="stylesheet" href="http://rs.luminousspice.com/css/rs.css">

  <link rel="apple-touch-icon" href="http://rs.luminousspice.com/apple-touch-icon.png">
  <link rel="shortcut icon" href="http://rs.luminousspice.com/favicon.ico" type="image/x-icon">
  
  <link rel="canonical" href="http://rs.luminousspice.com/zencoding-automator-services/">
  <link href="http://rs.luminousspice.com/index.xml" rel="alternate" type="application/rss+xml" title="the Right Stuff" />
  <link href="http://rs.luminousspice.com/index.xml" rel="feed" type="application/rss+xml" title="the Right Stuff" />
</head>


  <body>

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    このコンテンツは @luminousspice が非同期的に更新しています。経時的な順序に意味はありません。
  </div>

  <nav class="sidebar-nav">
    
    <a class="sidebar-nav-item " href="http://rs.luminousspice.com/table-of-contents/">総目次</a>
    <a class="sidebar-nav-item " href="http://rs.luminousspice.com/index-how-to-anki/">Anki 索引</a>
    <a class="sidebar-nav-item " href="http://rs.luminousspice.com/post/">アーカイブ</a>
    <a class="sidebar-nav-item " href="http://rs.luminousspice.com/search/">全文検索</a>
    
  </nav>

  <div class="sidebar-item">
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="http://rs.luminousspice.com/" title="Home">the Right Stuff</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="post">
  <article class="post">
  <h1 class="post-title">Zencoding Automator Services</h1>
  <span class="post-date"><time datetime="2012-08-06T20:49:29Z">2012-08-06</time></span>
  <p>Mac OS Xのサービス機能を使って、ZenCodingサービスを作りました。</p>
<p><a href="http://rs.luminousspice.com/zen-coding-with-mi/">前回の記事</a>のコードを書いていて、更に汎用的なautomatorのサービスにすると便利だと思い、作り直してみました。</p>

<p><img c src="http://rs.luminousspice.com/images/zencoding-service.png" alt="完成図" /></a>
<strong>図 1. 完成図</strong>
<h2>はじめにご理解いただきたいこと</h2>
<p>この記事で作成するアプリケーションは、Mac OS X 10.7.4、このOSに付属しているPerl 5.12.3とAutomator 2.2.4を使って作成しました。利用環境の違いによっては動作しない場合も予想されます。この記事は、自分の環境で動作するように一人で修正できる方に向けて書いています。</p>
<h2>準備作業</h2>
<p>前提条件としてOtchyさん作<a href="http://www.otchy.net/20100225/zen-coding-for-perl/">SSSCoding.pm</a>のインストールが必要です。
のPerlモジュールのインストール先は、たとえばターミナルから次のコマンドで調べることが出来ます。</p>
<pre>perl -e &lsquo;print $i++ . &ldquo;:&rdquo; . &ldquo;$_\n&rdquo; foreach @INC&rsquo;</pre>
<p>Mac OS X 10.7 では、/Library/Perl/5.12 でした。</p>
<h2>Automatorでサービスを作る</h2>
<p>automatorでサービス ワークフローを作成します。</p>
<p>サービスは次の項目を選択項目を受け取ります：の項目は、<strong>テキスト</strong>、検索対象：<strong>全てのアプリケーション</strong>　にします。</p>
<p>次に<strong>シェルスクリプトを実行</strong>というアクションを追加し、Perlのコードを入力します。
    次の画像のようになります。</p>
<img src="http://rs.luminousspice.com/images/zencoding-services-workflow.png" alt="Automatorワークフロー画面" /></a>
<strong>図 2. Automatorワークフロー画面</strong></p>

<p>中身のコードは次のように書きました。
<div class="highlight"><pre>use SSSCoding;</p>

<p>@tags = split(/\x0d|\x0a/, @ARGV[0]);</p>

<p>foreach (@tags) {
    print SSSCoding::expand($_).&rdquo;\x0d&rdquo;;
}</pre></div>
<strong>List. ZenCoding.workflow</strong></p>

<p>このワークフローを保存すれば、サービスとして使えるようになります。この際に指定した名前がサービスの中で表示される名前になります。文字列を選択すると、サービスのメニューにその名前が表示されます。システム環境 - キーボードでショートカットを登録することも出来ます。</p>
<h2>完成品のワークフローファイルをそのままインストールする</h2>
<p>完成品のworkflowファイルは、<a title="github" href="https://github.com/luminousspice/Zen-Coding-Services" target="_blank">githubからダウンロードできるようにしました</a>。</p>
<p>このファイルを開くと、インストールのためのダイアログが表示されます。手作業でインストールするのであれば、~/Library/Services/ に置くと機能するようになります。</p>
<img src="http://rs.luminousspice.com/images/zencoding-services-installer.png" alt="インストールダイアログ" />
<strong>図 3. インストールダイアログ</strong>

<h2>どこでも使えるよ</h2>
<p>これで、miでも、テキストエディットでも、スティッキーズでも、このブログを書いているFireforx上の入力画面でも、Mac OS Xのサービスが利用できるところはどこでも、ZenCodingの省略記法の展開が出来るようになりました。なんて素晴らしいんでしょう。</p>

<p>WordPress上での編集については、<a href="http://code.google.com/p/zen-coding/">Zen Coding for &lt;textarea&gt;</a>をWordPressのプラグイン化した<a href="http://wordpress.org/extend/plugins/wp-zen-coding/">WP Zen-Coding</a>が公開されています。これを使うと今回作成した省略記法の展開以外の全ての機能が使えるようです。</p>

<p><h2>ありがとう</h2>
Perl実装した<a href="http://www.otchy.net/">Otchyさん</a>、ありがとうございます。たったPerl7行でやりたいことが出来てしまった。</p>

  </article>
  <aside class="reference">
  
  
  </aside>
</div>

      <footer>
        <div class="footer">
          &copy; <time datetime="2016-03-21T14:35:52&#43;09:00">2016</time> luminousspice.com.
        </div>
      </footer>
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-29141274-5', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


  </body>
</html>
