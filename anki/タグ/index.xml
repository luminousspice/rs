<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>タグ on the Right Stuff</title>
    <link>/anki/%E3%82%BF%E3%82%B0/</link>
    <description>タグ | the Right Stuff</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Fri, 17 Jan 2014 22:55:53 +0900</lastBuildDate>
    <atom:link href="https://pubsubhubbub.superfeedr.com" rel="hub"/>
    <atom:link href="https://pubsubhubbub.appspot.com/" rel="hub"/>
    <atom:link href="/anki/%E3%82%BF%E3%82%B0/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>フックを使った Anki アドオンのつくり方</title>
      <link>/how_to_create_anki_add-ons/</link>
      <pubDate>Fri, 17 Jan 2014 22:55:53 +0900</pubDate>
      <guid>/how_to_create_anki_add-ons/</guid>
      <description>Anki は、アドオンを作成することで、標準機能を拡張したり、変更したりすることが出来ます。このアドオンの作成を簡単にするために、Anki はフック (Hook) という機能を提供しています。Anki の本体機能にカスタムのフックを追加し、機能拡張するアドオンを作成する方法を簡単に説明します。復習後、熟知になったノートにタグを付けるアドオンを開発します。	 	 Simple tutorial to create Anki Add-ons for developer with an custom hook.</description>
      <content>&lt;section id=&#34;preamble&#34;&gt;
&lt;p&gt;Anki は、アドオンを作成することで、標準機能を拡張したり、変更したりすることができます。このアドオンの作成を簡単にするために、Anki はフック (Hook) という機能を提供しています。フックを使うと標準機能の中に簡単に外部の関数を組み込むことができます。この記事では更に進んで Anki の標準のフックがない場所にカスタムのフックを追加し、機能拡張するアドオンを作成する方法を簡単に説明します。復習後、熟知になったノートにタグを付けるアドオンを開発します。オフィシャルドキュメント「Anki 2.0 アドオンの作成」を補足する内容です。&lt;/p&gt;
&lt;p&gt;この記事は、АnkiWeb に公開済みの Аnki アドオン (Add-on) &lt;a href=&#34;https://ankiweb.net/shared/info/1299246957&#34; target=&#34;_new&#34;&gt;Mature Tag&lt;/a&gt;を例にとって、解説します。
完成品をインストールして動作させることができますし、ソースコードを見ることもできます。最後に作成したアドオンを AnkiWeb の共有アドオン一覧に登録する方法を紹介します。&lt;/p&gt;
&lt;p&gt;アドオンのインストール方法は、&lt;a href=&#34;/how-to-use-shared-resources/&#34;&gt;Ankiの共有リソースを使ってみる&lt;/a&gt;で紹介しています。&lt;/p&gt;
&lt;p&gt;また、ソースコードの表示方法は、インストールが完了した後、メニューバーの[ツール]-[アドオン]-[Mature_Tag]-[編集&amp;#8230;]を選択してください。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;前提知識&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;前提知識&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;この記事の内容を理解するには、次の知識が必要です。&lt;/p&gt;
&lt;div class=&#34;ulist&#34;&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
Anki の操作方法
特に、Anki というアプリケーションの機能を十分理解した上での操作方法の習熟は必須です。
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
Python による開発経験
他の開発言語の経験でも構いませんが、自分で資料を読み Python の開発方法を学べる能力は必要です。
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
&lt;a href=&#34;/anki2addons/&#34;&gt;Anki 2.0 アドオンの作成&lt;/a&gt;の内容理解
本文中のサンプルコードを実際に動かしてアドオンを作成する経験があると理解に役立ちます。
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;この記事の最後に &lt;a href=&#34;#review&#34;&gt;Anki アドオン開発のおさらい&lt;/a&gt; という項目を設けて、必要な知識をまとめています。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;つくるアドオンの要件&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;つくるアドオンの要件&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;まず最初にアドオンの要件を決めておきます。&lt;/p&gt;
&lt;p&gt;「復習が終わったら、新たに設定した復習間隔を調べ、熟知なら &#34;Mature&#34; というタグをノートに追加し、それ以外なら  &#34;Mature&#34; を削除します。」&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;モジュールのインポート&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;モジュールのインポート&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;最初に必要なモジュールをインポートします。
Anki の復習で解答した時の処理は &lt;a href=&#34;https://github.com/dae/anki/blob/master/anki/sched.py&#34; target=&#34;_new&#34;&gt;sched.py&lt;/a&gt; の中のクラス &lt;code&gt;Scheduler&lt;/code&gt; のメソッド &lt;code&gt;answerCard&lt;/code&gt; で記述しています。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;strong&gt;from&lt;/strong&gt; anki.sched &lt;strong&gt;import&lt;/strong&gt; Scheduler&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;残念ながら復習に関する処理の中にフック (Hook) は存在しません。そこで独自のフックをこのメソッドの最後に追加します。
フックの設置、呼び出しに必要なモジュールをインポートします。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;strong&gt;from&lt;/strong&gt; anki.hooks &lt;strong&gt;import&lt;/strong&gt; addHook, runHook, wrap&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;もちろん &lt;code&gt;answerCard&lt;/code&gt; を書き換えることもできますが、今回の様な条件では独自フックの設置したほうが簡単に記述できます。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;復習の解答後に処理するフックを設置する&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;復習の解答後に処理するフックを設置する&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;まず、独自のフック &#34;anseweredRevCard&#34; を追加する関数 &lt;code&gt;newAnswerCard()&lt;/code&gt; を定義します。
runHook() はフックを新たに設置する標準の関数です。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;strong&gt;def&lt;/strong&gt; newAnswerCard(self, card, ease):
    runHook(&#39;anseweredRevCard&#39;, self, card)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;次に標準の &lt;code&gt;wrap()&lt;/code&gt; 関数を使って、&lt;code&gt;answerCard&lt;/code&gt; の後に &lt;code&gt;newAnswerCard&lt;/code&gt; の内容を追加する処理を記述します。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;Scheduler.answerCard = wrap(Scheduler.answerCard, newAnswerCard)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;すると &lt;code&gt;answerCard&lt;/code&gt; の最後に次の行が追加されます。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;runHook(&#39;anseweredRevCard&#39;, self, card)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これで、復習で解凍した後に処理を呼び出すフックを設置できました。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;タグを追加_削除する&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;タグを追加、削除する&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;復習が終わったら、復習間隔を調べ 21 日以上であったら、&#34;Mature&#34; タグを追加し、それ以外の場合は削除する関数　&lt;code&gt;matureCheck()&lt;/code&gt; を定義します。
熟知の基準日数は変数 &lt;code&gt;threshold&lt;/code&gt; に、設定するタグ文字列は変数 &lt;code&gt;MatureTag&lt;/code&gt; に設定しました。
タグをノートに追加するには &lt;code&gt;Note&lt;/code&gt; クラスのメソッド &lt;code&gt;addTag()&lt;/code&gt; を、削除するには &lt;code&gt;delTag()&lt;/code&gt; を使います。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;i&gt;# Threshold interval for tagging&lt;/i&gt;
threshold = 21
&lt;i&gt;# Tag string for mature note&lt;/i&gt;
MatureTag = u&#34;Mature&#34;

&lt;strong&gt;def&lt;/strong&gt; matureCheck(self, card):
    f = card.note()
    &lt;strong&gt;if&lt;/strong&gt; (card.ivl &amp;gt;= threshold):
        f.addTag(MatureTag)
    &lt;strong&gt;else&lt;/strong&gt;:
        f.delTag(MatureTag)
    f.flush()
    &lt;strong&gt;return&lt;/strong&gt; True&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最後に &lt;code&gt;addHook()&lt;/code&gt; 関数を使って上で作成したカスタムフック &#34;anseweredRevCard&#34;　で &lt;code&gt;matureCheck()&lt;/code&gt; 関数を呼び出す設定をします。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;addHook(&#34;anseweredRevCard&#34;, matureCheck)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これで、完成です。完成品は次の通りです。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;strong&gt;from&lt;/strong&gt; anki.hooks &lt;strong&gt;import&lt;/strong&gt; addHook, runHook, wrap
&lt;strong&gt;from&lt;/strong&gt; anki.sched &lt;strong&gt;import&lt;/strong&gt; Scheduler

&lt;i&gt;# Threshold interval for tagging&lt;/i&gt;
threshold = 21
&lt;i&gt;# Tag string for mature note&lt;/i&gt;
MatureTag = u&#34;Mature&#34;

&lt;strong&gt;def&lt;/strong&gt; matureCheck(self, card):
    f = card.note()
    &lt;strong&gt;if&lt;/strong&gt; (card.ivl &amp;gt;= threshold):
        f.addTag(MatureTag)
    &lt;strong&gt;else&lt;/strong&gt;:
        f.delTag(MatureTag)
    f.flush()
    &lt;strong&gt;return&lt;/strong&gt; True

&lt;strong&gt;def&lt;/strong&gt; newAnswerCard(self, card, ease):
    runHook(&#39;anseweredRevCard&#39;, self, card)

Scheduler.answerCard = wrap(Scheduler.answerCard, newAnswerCard)

addHook(&#34;anseweredRevCard&#34;, matureCheck)&lt;/pre&gt;&lt;/div&gt;
&lt;/section&gt;
&lt;section id=&#34;もっとかんたんに書く&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;もっとかんたんに書く&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;実は、フックを設置せずに記述を簡略化できます。メソッドを上書きする方法です。
&lt;code&gt;wrap()&lt;/code&gt; 関数で直接 &lt;code&gt;matureCheck&lt;/code&gt; を指定します。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;- &lt;strong&gt;def&lt;/strong&gt; newAnswerCard(self, card, ease):
-    runHook(&#39;anseweredRevCard&#39;, self, card)

- Scheduler.answerCard = wrap(Scheduler.answerCard, newAnswerCard)
+ Scheduler.answerCard = wrap(Scheduler.answerCard, matureCheck)

- addHook(&#34;anseweredRevCard&#34;, matureCheck)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;この場合は、フックを使わないので、他の関数も追加で呼び出すような追加拡張はできません。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;ファイルの配置&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;ファイルの配置&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;完成したファイル Mature_Tag.py を動作させるには、&lt;code&gt;Documents/Anki/addons&lt;/code&gt; フォルダの中に保存します。Anki を再起動すると、この Python スクリプトファイルを読み込みます。&lt;/p&gt;
&lt;p&gt;アドオンが読み込まれるとメニューバーに [ツール]-[アドオン]-[Mature_Tag] という項目が追加されます。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;ankiweb_の共有アドオン一覧に登録する&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;AnkiWeb の共有アドオン一覧に登録する&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;作成したアドオンを AnkiWeb に公開して、アドオン一覧に登録する方法を紹介します。
まず、&lt;a href=&#34;https://ankiweb.net/shared/addons/&#34; target=&#34;_new&#34;&gt;共有アドオン一覧&lt;/a&gt;を開き、AnkiWeb にサインインします。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/anki_addon_tutorial_1.png&#34; alt=&#34;アドオン一覧&#34; width=&#34;60%&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 1. 共有アドオン一覧&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;登録フォームは画面右上の [Upload Add-on] ボタンをクリックすると表示します。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/anki_addon_tutorial_2.png&#34; alt=&#34;登録フォーム&#34; width=&#34;60%&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 2. アドオン登録フォーム&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;このフォームでは次のように項目入力します。&lt;/p&gt;
&lt;div class=&#34;ulist&#34;&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
&lt;strong&gt;Title:&lt;/strong&gt; アドオンの名前を入力します。アドオン一覧に表示する名前にになります。
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
&lt;strong&gt;File:&lt;/strong&gt; 登録したいアドオンの Python スクリプトを選択します。今回の例では &lt;code&gt;Mature_Tag.py&lt;/code&gt; です。
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
&lt;strong&gt;Description&lt;/strong&gt; アドオンユーザーのためにアドオンの機能や使い方の説明を入力します。
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;入力が済んだら [Upload] を押すと登録できます。特に AnkiWeb に障害がなければ即座に公開されます。
登録したアドオンのページに移動します。&lt;/p&gt;
&lt;p&gt;公開したアドオンのページの下にある [Update] ボタンを押すと登録内容の編集ができ、[Remove] ボタンを押すとアドオンを削除することができます。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/anki_addon_tutorial_3.png&#34; alt=&#34;アドオンページ 編集、削除ボタン&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 3. アドオンページ 編集、削除ボタン&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;section id=&#34;まとめ&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;まとめ&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;「Anki 2.0 アドオンの作成」で説明しているとおり、Anki が標準で用意しているフックを利用すると Anki の機能の修正や追加が簡単になります。フックが用意されていない箇所にも、この記事で紹介した方法で自分でカスタムのフックを自由に追加することができます。フックの使い方になれると Anki アドオン作成するを能力が向上し、Anki 自身の機能についても理解を深めることができます。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;review&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;遺補: Anki アドオン開発のおさらい&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;Anki のアドオンは、Python スクリプトで記述し、&lt;code&gt;Documents/Anki/addons&lt;/code&gt; フォルダの中に保存します。
Anki に Python インタープリタが含まれているため、アドオンの開発に Python のインストールは必要ありません。&lt;/p&gt;
&lt;p&gt;Anki は起動時に &lt;code&gt;addons&lt;/code&gt; フォルダの中の &lt;code&gt;.py&lt;/code&gt; ファイルを読み込みます。
従って、新たにアドオンファイルを追加した場合、再起動して初めて機能するようになります。
なお、シフトキーを押したまま Anki を起動すると、アドオンファイルの読み込みは行いません。&lt;/p&gt;
&lt;p&gt;Anki には、WordPress のようにフック (Hook) という機能を提供していて、標準機能を拡張したり、変更したりするアドオン開発が容易にできます。Anki 自身もたくさんのフックを利用しています。&lt;/p&gt;
&lt;p&gt;アドオンをつくるために Anki が用意している関数は次の通りです。&lt;/p&gt;
&lt;table rules=&#34;rows&#34; frame=&#34;hsides&#34;cellspacing=&#34;0&#34; cellpadding=&#34;4&#34;&gt;
&lt;caption class=&#34;title&#34;&gt;表 1. アドオン開発用関数&lt;/caption&gt;
&lt;colgroup&gt;
&lt;col class=&#34;span1&#34;&gt;
&lt;col class=&#34;span4&#34;&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;関数名&lt;/th&gt;
&lt;th&gt;説明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;runHook&lt;/td&gt;
&lt;td&gt;フックを実行する。値は返さない。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;runFilter&lt;/td&gt;
&lt;td&gt;フィルターを実行し値を返す。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;addHook&lt;/td&gt;
&lt;td&gt;フックを追加する。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;remHook&lt;/td&gt;
&lt;td&gt;フックを削除する。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;wrap&lt;/td&gt;
&lt;td&gt;既存の関数を上書きする。第3引数でオリジナルの関数の位置を指定。既定はオリジナルの後にカスタム関数を実行する。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;フックを見つけるには、Anki のソースコードを　&#34;runHook&#34;、&#34;runFilter&#34; で検索します。Anki 2.0.20 現在　36 のフックが存在します。&lt;/p&gt;
&lt;p&gt;フックの使い方を詳しく知るには、&lt;a href=&#34;/anki2addons/&#34;&gt;Anki 2.0 アドオンの作成&lt;/a&gt;、および &lt;a href=&#34;https://github.com/dae/anki/blob/master/anki/hooks.py&#34; target=&#34;_new&#34;&gt;anki/hooks.py&lt;/a&gt; をお読みください。&lt;/p&gt;
&lt;/section&gt;
</content>
    </item>
    
    <item>
      <title>Ankiにデータをまとめて取り込む</title>
      <link>/how-to-import/</link>
      <pubDate>Sat, 20 Apr 2013 09:00:02 +0900</pubDate>
      <guid>/how-to-import/</guid>
      <description>今回はまとまったリストを暗記教材として登録する方法を紹介します。単語の一覧表をテキストデータ CSV に加工に、Ankiへ読み込む方法を紹介します。How to import CSV data into Anki.</description>
      <content>&lt;section id=&#34;preamble&#34;&gt;
&lt;p&gt;&lt;strong&gt;連載: Ankiの使い方 〜覚えるために忘れろ〜 第2回&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Ankiを使っている人なら知っている使い方をあえて紹介する連載の2回目は、学習教材の一括登録です。前回は、暗記したい項目に出会う度に登録する使い方を取り上げましたが、今回はまとまったリストを暗記教材として登録する方法を紹介します。&lt;/p&gt;
&lt;div class=&#34;sidebarblock well&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;p&gt;&lt;a target=&#34;_new&#34; href=&#34;http://ankisrs.net/&#34;&gt;Anki&lt;/a&gt;とはDamien Elmesが開発している分散学習システム(SRS; Spaced Repetition learning Systems)です。&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;/section&gt;
&lt;section id=&#34;この記事の目標&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;この記事の目標&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;教材を一括登録するAnkiの読み込み機能の扱い方になれましょう。&lt;/p&gt;
&lt;p&gt;例として中学校教科書に使われている英単語リストをテキストファイルに整形して読み込みます。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;使うもの&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;使うもの&lt;/h2&gt;
  &lt;/div&gt;
&lt;div class=&#34;ulist&#34;&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
Anki2
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
英単語リスト
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;
表計算ソフト(Excel形式を読み込めて、テキストファイルに保存できるもの)
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;中学校の教科書に掲載されている英単語一覧を登録してみましょう。教科書会社のサイトに現行6社の教科書に使用している英単語のリストが入手できますのでこれを使います。教科書の巻末にある語彙集をまとめたもののようです。&lt;/p&gt;
&lt;p&gt;&lt;a target=&#34;_new&#34; href=&#34;http://www.kairyudo.co.jp/contents/02-chu/eigo/h24/eitango.htm&#34;&gt;平成24～27年度用の各社の中学校 英語教科書で使われる英単語のリスト&lt;/a&gt; (開隆堂出版株式会社)&lt;/p&gt;
&lt;p&gt;Excel形式と、PDF形式で提供していますが今回はExcel形式のものを使います。&lt;/p&gt;
&lt;h3 id=&#34;代替リストの参考例&#34;&gt;代替リストの参考例&lt;/h3&gt;
&lt;p&gt;他にも同じようなリストで面白そうなものを紹介します。頻出の英単語なので全体としては違いはそれほどないですが、その中の微妙な差が興味深いかなと。&lt;/p&gt;
&lt;div class=&#34;ulist&#34;&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
&lt;a target=&#34;_new&#34; href=&#34;http://www.cambridgeenglish.org/Images/22099-vocabulary-list.pdf&#34;&gt;BEC Preliminary Vocabulary List&lt;/a&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;ケンブリッジ大学ESOL試験 ビジネス英語分野(BEC Preliminary; CEFR B1レベル) の受験準備教材。ビジネス英語の基礎語彙を確認したい場合に。
&lt;a target=&#34;_new&#34; href=&#34;http://www.cambridgeenglish.org/exams-and-qualifications/business-certificates/business-preliminary/how-to-prepare/&#34;&gt;BEC Preliminaryの詳しい説明&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;ulist&#34;&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
&lt;a target=&#34;_new&#34; href=&#34;http://en.wiktionary.org/wiki/Wiktionary:Frequency_lists/Contemporary_fiction_in_60_categories&#34;&gt;The 2000 most frequently used words in contemporary fiction (Wiktionary)&lt;/a&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;フィクションの現代作品の中の頻出2000語。作品の主題と使用頻度で分類。左の列から400語毎に5段階に頻度分類。フィクションを読む速度をもっと上げたいのなら。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;テキストファイル読み込み機能&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;テキストファイル読み込み機能&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;Ankiは、タブやカンマ、セミコロン、スペースで区切ったテキストファイルを読み込むことができます。
フィールドにHTMLのタグを含めることができますし、テキストファイルのフィールドとAnkiファイルのフィールドの対応を読み込みの際に画面から設定することができます。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_1.png&#34; alt=&#34;読み込み設定画面&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 1. 読み込み設定画面&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ankiに登録したいデータを持っているのなら、そのデータをタブ区切りなどのテキストファイルに加工する方法を考えましょう。&lt;/p&gt;
&lt;p&gt;この機能が利用できるのは PC 版 Anki だけです。iOS アプリ AnkiMobile、Android アプリ AnkiDroid は、Anki単語帳パッケージ (apkg) の読み込みだけに対応しています。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;単語リストの前処理&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;単語リストの前処理&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;まずデータの内容を確認してみましょう。Microsot ExcelかExcel形式のファイルを編集してテキスト形式で保存できるアプリケーションソフトを使います。この記事ではLibreOffice Calcを使いますが、操作内容Excelを使った場合とはほとんど変わりません。&lt;/p&gt;
&lt;p&gt;LibreOfficeは自由でかつオープンソースのオフィススイートです。Windows、Macintosh、Linux を始めとする多くのプラットフォームで動作します。LibreOfficeの入手や詳しい内容は &lt;a href=&#34;http://ja.libreoffice.org/&#34;&gt;http://ja.libreoffice.org/&lt;/a&gt; をご覧ください。&lt;/p&gt;
&lt;p&gt;ダウンロードした &#34;h24-eitango-1.xls&#34; を開いてみると図2のようになります。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_2.png&#34; alt=&#34;単語データの内容&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 2. 単語データの内容&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A列は英単語、B列は同綴異義語の区別、C列からH列までは、各社の教科書で何年生で初出するか、I列は何社の教科書に掲載されているかを示しています。3277個の単語が含まれていました。
A列をFrontフィールドに、I列を頻度表示を示すタグに割り当てるようデータを加工していきます。今回はBackフィールドにあたる解答項目は空白にしておきます。&lt;/p&gt;
&lt;p&gt;今後の連載で解答、ヒントへのリンクを生成するカードのカスタマイズ方法を紹介します。&lt;/p&gt;
&lt;h3 id=&#34;重複を除く&#34;&gt;重複を除く&lt;/h3&gt;
&lt;p&gt;Anki2では、最初のフィールド(既定でFrontフィールド、いわゆる見出しフィールド)の重複を認めていません。B列でソートして重複している見出しを解消する必要があります。
図3からcanは助動詞と名詞で同綴異義語として別々の項目で登録されていることが分かります。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_3.png&#34; alt=&#34;重複データ&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 3. 重複データ&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;一つ目の方法は、片方を削ってしまうこと。
もう一つ目は、見出しを書き換えてcan(助動詞),can(名詞)と別の見出しにしてしまう方法です。&lt;/p&gt;
&lt;p&gt;今回は次の17個の重複している単語を一つの項目にまとめました。名寄せというべきかもしれません。
can, close, fall, felt, found, kid, kind,last, light, like, live, read, rest, right, second, story, train&lt;/p&gt;
&lt;h3 id=&#34;頻度タグの準備&#34;&gt;頻度タグの準備&lt;/h3&gt;
&lt;p&gt;I列の数字を頻度表示のタグとして利用したいので、加工しておきます。数字だけのタグだと意味が分かりにくいので、Gradeという文字を先につけて、1社で使われている単語のタグをGrade1と付けたいと思います。&lt;/p&gt;
&lt;p&gt;やり方は色々ありますが、I列を選択した状態で、&#34;1&#34;を&#34;Grade1&#34;、&#34;2&#34;を&#34;Grade2&#34;というように検索置換掛けました。&lt;/p&gt;
&lt;h3 id=&#34;不要なデータを削除&#34;&gt;不要なデータを削除&lt;/h3&gt;
&lt;p&gt;C列からH列までは不要なので削除します。
また、見出しの中に&#34;Agghhhhhh&#34;というようなオノマトペや&#34;Alice in Wonderland&#34;のような書名、固有名詞が多数含まれています。暗記に必要のない項目は今のうちに削除しておきましょう。Ankiからも削除はできますが、今の段階で除いておく方が断然楽です。&lt;/p&gt;
&lt;p&gt;最終的に見出し語と頻度の2列からなるデータにまとめました。(図 4)&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_4.png&#34; alt=&#34;加工済みデータ&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 4. 加工済みデータ&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;テキストファイルに保存&#34;&gt;テキストファイルに保存&lt;/h3&gt;
&lt;p&gt;最後にテキストファイル形式に保存します。LibreOffice Calcではファイルの種類を[テキスト CSV(.csv)]を選択します。&lt;/p&gt;
&lt;p&gt;テキストファイルを開いて中を確認すると、カンマで区切られたテキストファイルになっていることが分かります。(図 5)&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_5.png&#34; alt=&#34;読み込み用テキストファイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 5. 読み込み用テキストファイル&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;section id=&#34;ankiへの読み込み&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;Ankiへの読み込み&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;これまで作業してきたテキストファイルの読み込み手順を紹介します。&lt;/p&gt;
&lt;h3 id=&#34;読み込みファイルの指定&#34;&gt;読み込みファイルの指定&lt;/h3&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Ankiへの読み込み処理を呼び出す方法は、(1)  メインウィンドウ右下の[ファイルを読み込む]ボタンを押す方法、(2) メニューバーから[ファイル]&amp;gt;[読み込む](Command/Ctrl + I)の2通りあります。&lt;/p&gt;
&lt;p&gt;ファイル選択画面が開きますので、これまで作成してきたテキストファイルを選択し、ファイルの種類の指定に[テキスト(タブ区切りまたはセミコロン区切り)(*)]を選択して[開く]ボタンを押してください (図 6)。作成したファイルはカンマ区切りですが読み込むことができます。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_import.png&#34; alt=&#34;読み込むファイルの選択&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 6. 読み込むファイルの選択&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ankiの読み込み機能から、Ankiから書き出して作るAnki 単語帳パッケージ (apkg)や旧バージョンの単語帳ファイル(anki)を読み込むことが出来ます。
また、Mnemosyne、Supermemo、Paukerなどのアプリケーションの出力ファイルを読み込むことが出来ます。
ファイル指定の際にそれぞれのファイルの種類を選択します。&lt;/p&gt;
&lt;p&gt;選択したテキストファイルが Anki に読み込まれると、図 7 のように設定画面が開きます。[コンマで区切ったフィールド]というボタンが現れたことに注意してください。区切り文字を自動認識してくれます。素晴らしい。
他の区切り文字を指定したい場合はこのボタンを押すと他の文字を指定できます。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_6.png&#34; alt=&#34;読み込み設定画面&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 7. 読み込み設定画面&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;保存先単語帳の作成&#34;&gt;保存先単語帳の作成&lt;/h3&gt;
&lt;p&gt;図 7の右上に、単語帳という見出しの右に[Default]というボタンがあります。これは、読み込み先に単語帳Defaultを指定しています。今回は中学英単語という名前の単語帳を作ってデータ追加してみましょう。&lt;/p&gt;
&lt;p&gt;[Default]ボタンを押すと単語帳指定ウィンドウが表示されます。このウィンドウの左下[追加]ボタンを押すと、単語帳の新規作成ができます。(図 8)&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_7.png&#34; alt=&#34;単語帳の新規作成&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 8. 単語帳の新規作成&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;フィールドの対応指定&#34;&gt;フィールドの対応指定&lt;/h3&gt;
&lt;p&gt;さらにフィールドの割り当てをしましょう。
読み込んだテキストファイルは1列目英単語、2列目頻度表示タグだったことを思い出してください。
図 7のフィールドの割り当てを見ていただくと、1列目はFrontフィールドに、2列目はBackフィールドに設定しています。2列目が、1列目の解答やヒントであればこのままでよいのですが、今回はタグに割り当てるため、設定を変更します。フィールド設定の[変更]ボタンを押すと、対象フィールドを選択する画面が開きますので [タグに割り当てる]を選択してください。(図 9)&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_8.png&#34; alt=&#34;読み込み用テキストファイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 9. 読み込み用テキストファイル&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;読み込みオプションの設定&#34;&gt;読み込みオプションの設定&lt;/h3&gt;
&lt;p&gt;最後に、読み込みオプションの[最初のフィールドが一致した場合、既存ノートを更新する。]という項目を[最初のフィールドが既存ノートと同じであっても読み込む]に変更します。
これは、読み込みデータに既に登録済みの単語があった場合、既存ノートを書き換えることなく別のデータとして読み込む設定になります。(図 10)&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_9.png&#34; alt=&#34;読み込み用テキストファイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 10. 読み込み用テキストファイル&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;これで読み込み設定完了です。[読み込む]ボタンを押すと、読み込みを開始し、終了すると処理内容の報告を表示します。(図 11)&lt;/p&gt;
&lt;p&gt;既存のノートを更新した場合、読み込まなかったデータがあった場合などもここで表示します。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_10.png&#34; alt=&#34;読み込み処理ログ&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 11. 読み込み処理ログ&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;報告画面を閉じて、メインウィンドウに戻ります。単語帳「中学英単語」が現れ、新規学習20件が早速割り当てられていることが分かります。(図 12)&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_11.png&#34; alt=&#34;新規単語帳が追加された&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 12. 新規単語帳が追加された&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;section id=&#34;ブラウザーで登録内容を確認&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;ブラウザーで登録内容を確認&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;読み込んだデータ全体を確認してみましょう。単語帳一覧から「中学英単語」をクリックし、タイトルバー下の[ブラウザー]というリンクをクリックしてください。
ブラウザーが表示されます。さらに左のリストから「中学英単語」を選択すると一覧表示が得られます。&lt;/p&gt;
&lt;p&gt;ウィンドウのタイトルバーを見てください。この単語帳に3254枚のカードがあることが分かります。
actuallyという単語を選択した状態で、下のタグ欄に&#34;Grade5&#34;という文字が表示されています。頻度表示のタグも割り振られていることが分かります。
また、検索欄に&#34;deck:中学英単語&#34;という文字が現れていることも注意してください。これは、左のメニューをクリックしなくても、検索欄に文字入力しても同じ結果が得られることを意味します。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_12.png&#34; alt=&#34;ブラウザー 単語帳「中学英単語」を選択&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 13. ブラウザー 単語帳「中学英単語」を選択(deck:中学英単語)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;左のメニューから&#34;Grade2&#34;を選択すると、このタグを持つデータ一覧が得られます。Grade2のタグを持つカードは、470枚あり、&#34;tag:Grade2&#34;でも検索できることが分かります。(図 14)&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_13.png&#34; alt=&#34;ブラウザー タグ Grade2を選択&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 14. ブラウザー タグ Grade2を選択(tag:Grade2)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;左のメニューから「今日追加したカード」を選択すると、その日追加したカードの一覧が表示されます。中学英単語のカード3254枚を表示します。&#34;added:1&#34;でも検索できます。&lt;/p&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/images/how2anki_2_14.png&#34; alt=&#34;ブラウザー&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;title&#34;&gt;図 15. ブラウザー&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ブラウザーの詳しい使い方は、ユーザーマニュアルの&lt;a target=&#34;_new&#34; href=&#34;http://ankisrs.net/docs/manual.html#browser&#34;&gt;Browser&lt;/a&gt;をご覧ください。検索文字列の詳しい設定方法を知っておくと、学習方法をカスタマイズするフィルター学習を設定する時に役立ちます。幸いにしてこのページは&lt;a href=&#34;http://wikiwiki.jp/rage2050/?2.0%2FBrowser&#34;&gt;日本語訳&lt;/a&gt;されています。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;おわりに&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;おわりに&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;データをテキスト形式に変換できれば、簡単にAnkiに取り込めます。その点を分かっていただけるとうれしいです。たくさん問題を作りすぎて困るくらいです。皆さんの作った専門性あふれる&lt;a href=&#34;/how-to-share-anki-decks/&#34;&gt;Anki単語帳を共有&lt;/a&gt;していただけると、もっと楽しくなるのではないかと思います。&lt;/p&gt;
&lt;p&gt;学習方法については、&lt;a href=&#34;/how-to-anki/&#34;&gt;前回説明した内容&lt;/a&gt;の通りです。いろいろな事柄の暗記をして、Ankiを楽しんでください。&lt;/p&gt;
&lt;p&gt;この記事には、&lt;a href=&#34;/how-to-edit-cards/&#34;&gt;解答へのリンクを設定していく続編&lt;/a&gt;と&lt;a href=&#34;/bulk-import-media-files-into-anki/&#34;&gt;画像や音声、動画もまとめて取り込む続編&lt;/a&gt;を用意しています。合わせてご利用ください。&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;更新情報&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;更新情報&lt;/h2&gt;
  &lt;/div&gt;
&lt;p&gt;2013/04/20: 初出&lt;/p&gt;
&lt;p&gt;2014/09/21: 再構成、ファイル読み込みの手順を更新&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&#34;連載_ankiの使い方_覚えるために忘れろ_記事一覧&#34;&gt;
  &lt;div class=&#34;page-header&#34;&gt;
    &lt;h2&gt;連載: Ankiの使い方 〜覚えるために忘れろ〜 記事一覧&lt;/h2&gt;
  &lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;a href=&#34;/how-to-anki/&#34;&gt;はじめてのAnki – まず使ってみる&lt;/a&gt;(インストール、問題入力、学習の流れ)
&lt;/li&gt;
&lt;li&gt;
Ankiにデータをまとめて取り込む (テキストデータの一括登録)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;/how-to-use-shared-resources/&#34;&gt;Ankiの共有リソースを使ってみる&lt;/a&gt;(アドオン、共有単語帳)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;/how-to-edit-cards/&#34;&gt;Ankiのカード表示を編集する&lt;/a&gt;(カード編集、外部リンク設定、読み上げ)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;/browser-overview/&#34;&gt;Ankiのブラウザーの使い方とデータ検索&lt;/a&gt;(ブラウザー、検索条件)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;/how-to-customize-learning/&#34;&gt;フィルター単語帳でAnki学習をカスタマイズしよう &lt;/a&gt;(カスタム学習、フィルター単語帳、独自の学習条件を設定)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;/reduce-anki-backlog-with-stats/&#34;&gt;Anki統計情報を活用したバックログ解消法&lt;/a&gt;(統計情報の見方、たまった復習カードの解決法)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;/how-to-share-anki-decks/&#34;&gt;Anki単語帳を共有する方法&lt;/a&gt;(単語帳の書き出し、AnkiWebへの共有)
&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;/index-how-to-anki/&#34;&gt;はじめてAnkiを使う人のための索引&lt;/a&gt;(連載内容の索引)
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
    </item>
    
  </channel>
</rss>
